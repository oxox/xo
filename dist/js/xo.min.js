/*! xo v1.0.0 - 12/16/2013
   http://oxox.io/xo
   Copyright (c) 2013 oxox.io - Licensed MIT */
function FastClick(a){"use strict";var b,c=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=a,!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(c,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(c,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(c,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(c,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(c,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(c,arguments)},FastClick.notNeeded(a)||(this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(b=a.onclick,a.addEventListener("click",function(a){b(a)},!1),a.onclick=null))}FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return this.deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],this.deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.deviceIsIOS4&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a){"use strict";return new FastClick(a)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;var Hogan={};!function(a,b){function c(a){return String(null===a||void 0===a?"":a)}function d(a){return a=c(a),j.test(a)?a.replace(e,"&amp;").replace(f,"&lt;").replace(g,"&gt;").replace(h,"&#39;").replace(i,"&quot;"):a}a.Template=function(a,c,d,e){this.r=a||this.r,this.c=d,this.options=e,this.text=c||"",this.buf=b?[]:""},a.Template.prototype={r:function(){return""},v:d,t:c,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){var e=c[a];return e?(this.c&&"string"==typeof e&&(e=this.c.compile(e,this.options)),e.ri(b,c,d)):""},rs:function(a,b,c){var d=a[a.length-1];if(!k(d))return c(a,b,this),void 0;for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return k(a)&&0===a.length?!1:("function"==typeof a&&(a=this.ls(a,b,c,d,e,f,g)),h=""===a||!!a,!d&&h&&b&&b.push("object"==typeof a?a:b[b.length-1]),h)},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if("."===a&&k(b[b.length-2]))return b[b.length-1];for(var h=1;h<e.length;h++)f&&"object"==typeof f&&e[h]in f?(g=f,f=f[e[h]]):f="";return d&&!f?!1:(d||"function"!=typeof f||(b.push(g),f=this.lv(f,b,c),b.pop()),f)},f:function(a,b,c,d){for(var e=!1,f=null,g=!1,h=b.length-1;h>=0;h--)if(f=b[h],f&&"object"==typeof f&&a in f){e=f[a],g=!0;break}return g?(d||"function"!=typeof e||(e=this.lv(e,b,c)),e):d?!1:""},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;var d=a.call(b,d);return d=null==d?String(d):d.toString(),this.b(f.compile(d,g).render(b,c)),!1},b:b?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");return this.buf=[],a}:function(){var a=this.buf;return this.buf="",a},ls:function(a,b,c,d,e,f,g){var h=b[b.length-1],i=null;if(!d&&this.c&&a.length>0)return this.ho(a,h,c,this.text.substring(e,f),g);if(i=a.call(h),"function"==typeof i){if(d)return!0;if(this.c)return this.ho(i,h,c,this.text.substring(e,f),g)}return i},lv:function(a,b,d){var e=b[b.length-1],f=a.call(e);return"function"==typeof f&&(f=c(f.call(e)),this.c&&~f.indexOf("{{"))?this.c.compile(f,this.options).render(e,d):c(f)}};var e=/&/g,f=/</g,g=/>/g,h=/\'/g,i=/\"/g,j=/[&<>\"\']/,k=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof exports?exports:Hogan),function(a){function b(a){"}"===a.n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1))}function c(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function d(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;e>d;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function e(a,b,c,d){for(var h=[],i=null,j=null;a.length>0;)if(j=a.shift(),"#"==j.tag||"^"==j.tag||f(j,d))c.push(j),j.nodes=e(a,j.tag,c,d),h.push(j);else{if("/"==j.tag){if(0===c.length)throw new Error("Closing tag without opener: /"+j.n);if(i=c.pop(),j.n!=i.n&&!g(j.n,i.n,d))throw new Error("Nesting error: "+i.n+" vs. "+j.n);return i.end=j.i,h}h.push(j)}if(c.length>0)throw new Error("missing closing tag: "+c.pop().n);return h}function f(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c].o==a.n)return a.tag="#",!0}function g(a,b,c){for(var d=0,e=c.length;e>d;d++)if(c[d].c==a&&c[d].o==b)return!0}function h(a){return a.replace(u,"\\\\").replace(r,'\\"').replace(s,"\\n").replace(t,"\\r")}function i(a){return~a.indexOf(".")?"d":"f"}function j(a){for(var b="",c=0,d=a.length;d>c;c++){var e=a[c].tag;"#"==e?b+=k(a[c].nodes,a[c].n,i(a[c].n),a[c].i,a[c].end,a[c].otag+" "+a[c].ctag):"^"==e?b+=l(a[c].nodes,a[c].n,i(a[c].n)):"<"==e||">"==e?b+=m(a[c]):"{"==e||"&"==e?b+=n(a[c].n,i(a[c].n)):"\n"==e?b+=p('"\\n"'+(a.length-1==c?"":" + i")):"_v"==e?b+=o(a[c].n,i(a[c].n)):void 0===e&&(b+=p('"'+h(a[c])+'"'))}return b}function k(a,b,c,d,e,f){return"if(_.s(_."+c+'("'+h(b)+'",c,p,1),c,p,0,'+d+","+e+',"'+f+'")){_.rs(c,p,function(c,p,_){'+j(a)+"});c.pop();}"}function l(a,b,c){return"if(!_.s(_."+c+'("'+h(b)+'",c,p,1),c,p,1,0,0,"")){'+j(a)+"};"}function m(a){return'_.b(_.rp("'+h(a.n)+'",c,p,"'+(a.indent||"")+'"));'}function n(a,b){return"_.b(_.t(_."+b+'("'+h(a)+'",c,p,0)));'}function o(a,b){return"_.b(_.v(_."+b+'("'+h(a)+'",c,p,0)));'}function p(a){return"_.b("+a+");"}var q=/\S/,r=/\"/g,s=/\n/g,t=/\r/g,u=/\\/g,v={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(a,e){function f(){r.length>0&&(s.push(new String(r)),r="")}function g(){for(var a=!0,b=w;b<s.length;b++)if(a=s[b].tag&&v[s[b].tag]<v._v||!s[b].tag&&null===s[b].match(q),!a)return!1;return a}function h(a,b){if(f(),a&&g())for(var c,d=w;d<s.length;d++)s[d].tag||((c=s[d+1])&&">"==c.tag&&(c.indent=s[d].toString()),s.splice(d,1));else b||s.push({tag:"\n"});t=!1,w=s.length}function i(a,b){var d="="+y,e=a.indexOf(d,b),f=c(a.substring(a.indexOf("=",b)+1,e)).split(" ");return x=f[0],y=f[1],e+d.length-1}var j=a.length,k=0,l=1,m=2,n=k,o=null,p=null,r="",s=[],t=!1,u=0,w=0,x="{{",y="}}";for(e&&(e=e.split(" "),x=e[0],y=e[1]),u=0;j>u;u++)n==k?d(x,a,u)?(--u,f(),n=l):"\n"==a.charAt(u)?h(t):r+=a.charAt(u):n==l?(u+=x.length-1,p=v[a.charAt(u+1)],o=p?a.charAt(u+1):"_v","="==o?(u=i(a,u),n=k):(p&&u++,n=m),t=u):d(y,a,u)?(s.push({tag:o,n:c(r),otag:x,ctag:y,i:"/"==o?t-y.length:u+x.length}),r="",u+=y.length-1,n=k,"{"==o&&("}}"==y?u++:b(s[s.length-1]))):r+=a.charAt(u);return h(t,!0),s},a.generate=function(b,c,d){var e='var _=this;_.b(i=i||"");'+j(b)+"return _.fl();";return d.asString?"function(c,p,i){"+e+";}":new a.Template(new Function("c","p","i",e),c,a,d)},a.parse=function(a,b,c){return c=c||{},e(a,"",[],c.sectionTags||[])},a.cache={},a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];return d?d:(d=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b),this.cache[c]=d)}}("undefined"!=typeof exports?exports:Hogan),function(a,b,c){window.XO=function(b,c){if(XO[b])return console.warn("Module with id ["+b+"] exists!"),void 0;var e={id:b};XO.EVENT[b]={},a.extend(e,d),c.call(e,a,XO.CONST),XO[b]=e,e=null},a.extend(XO,{version:"1.0.0",author:"http://oxox.io",$body:a(document.body),$win:a(window),EVENT:{},LS:localStorage,toHtml:function(a,c,d){return a=b.compile(a),a.render(c,d)},baseRouter:c.Router,history:c.history,baseView:c.View,warn:function(a,b){return a="XO.JS:"+a,void 0!==window.console&&XO.App.opts.debug===!0&&console.warn(a,b),a},isExternalLink:function(a){return"_blank"===a.attr("target")||"external"===a.attr("rel")||a.is('a[href^="http://maps.google.com"], a[href^="mailto:"], a[href^="tel:"], a[href^="javascript:"], a[href*="youtube.com/v"], a[href*="youtube.com/watch"]')}});var d={exposeEvent:function(b){if(a.isArray(b))for(var c=0,d=b.length;d>c;c++)XO.EVENT[this.id][b[c]]="on"+this.id+b[c];else XO.EVENT[this.id][b]="on"+this.id+b},disposeEvent:function(a){XO.$body.off(XO.EVENT[this.id][a])},disposeAllEvents:function(){var a=XO.EVENT[this.id];for(var b in a)this.disposeEvent(b)},getLSKey:function(a){return["XO",this.id,a].join(".")}}}(Zepto,Hogan,Backbone),XO.CONST={CLASS:{ACTIVE:"current",UIACTIVE:"active",ANIMATION_IN:"in",ANIMATION_OUT:"out",ANIMATION_INMOTION:"inmotion",SUPPORT_3D:"supports3d",IOS5_AND_ABOVE:"ios5up",SUPPORT_TOUCHSCROLL:"touchscroll",SUPPORT_AUTOSCROLL:"autoscroll",ANIMATION_3D:"animating3d",ANIMATING:"animating",HIDE:"hide"},SELECTOR:{PAGE_WRAPPER:"body",DEFAULT_CSS_HOST:"body"},ATTR:{PAGE:"data-page",PAGE_SRC:"data-pagesrc",ANIMATION:"data-animate"},DEFAULT:{ANIMATION_NONE:"none",TEMPLATE_SUFFIX:"/",VIEW:"index",PAGE:"home",VIEW_ID_PREFIX:"xoview",DEFAULT_ACTION_PREFIX:"_"},ACTION:{PAGE:"page",SECTION:"section"}},XO("media",function(){window.matchMedia=window.matchMedia||function(a){"use strict";var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42===f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(document),this.test=function(a){return window.matchMedia(a).matches}}),XO("support",function(a,b){var c={supportForTransform3d:function(){var b,c,d,e="transform-3d",f=["Webkit","Moz","O"],g=a("<body id='XO-3DTEST'>").prependTo("html"),h=XO.media.test("(-"+f.join("-"+e+"),(-")+"-"+e+"),("+e+")");if(h)return!!h;b=document.createElement("div"),c={MozTransform:"-moz-transform",transform:"transform"},g.append(b);for(d in c)void 0!==b.style[d]&&(b.style[d]="translate3d( 100px, 1px, 1px )",h=window.getComputedStyle(b).getPropertyValue(c[d]));return g.parentNode.removeChild(g),!!h&&"none"!==h},supportIOS5:function(){var a=!1,b=/OS (\d+)(_\d+)* like Mac OS X/i,c=window.navigator.userAgent;return b.test(c)&&(a=b.exec(c)[1]>=5),a}};this.init=function(a){this.animationEvents="undefined"!=typeof window.WebKitAnimationEvent,this.touch="undefined"!=typeof window.TouchEvent&&window.navigator.userAgent.indexOf("Mobile")>-1&&XO.App.opts.useFastTouch,this.transform3d=c.supportForTransform3d(),this.ios5=c.supportIOS5(),this.touch||XO.warn("This device does not support touch interaction, or it has been deactivated by the developer. Some features might be unavailable."),this.transform3d||XO.warn("This device does not support 3d animation. 2d animations will be used instead.");var d=[];this.transform3d&&d.push(b.CLASS.SUPPORT_3D),a.useTouchScroll&&(this.ios5?d.push(b.CLASS.TOUCHSCROLL):d.push(b.CLASS.AUTOSCROLL)),XO.$body.addClass(d.join(" "))}}),XO("Event",function(a){this.on=function(b,c){return arguments.length<=2?(XO.$body.bind(b,c),void 0):(a(arguments[0]).bind(arguments[1],arguments[2]),void 0)},this.trigger=function(b,c){return arguments.length<=2?(XO.$body.trigger(b,c),void 0):(a(arguments[0]).trigger(arguments[1],arguments[2]),void 0)},this.init=function(){XO.EVENT.Sys={viewChange:"onorientationchange"in window?"orientationchange":"resize",fingerDown:XO.support.touch?"touchstart":"mousedown",fingerMove:XO.support.touch?"touchmove":"mousemove",fingerUp:XO.support.touch?"touchend":"mouseup"}}}),XO("plugin",function(a){var b=function(b,c){$el=b.length&&0!=b.length?b:a(b),this.$el=$el,this.dataset=c,this.plugin=c.plugin,this.pluginId=c.pluginId,this.init($el,c)};b.destroy=function(){this.$el.off("touchend"),this.$el.off("touchstart"),this.$el.off("touchmove"),this.$el.off("tab"),console.log("super destroy!")},b.init=function(){},b.bootup=function(){},b.initEvent=function(){},b.on=function(a,b){var c=this;XO.Event.on(this.$el,a+"-"+this.plugin,function(a,d){b.call(c,d)})},b.bind=function(){},b.trigger=function(a,b){XO.Event.trigger(this.$el,a+"-"+this.plugin,b)};var c={},d=0;this.get=function(a){return c[a]},this._show=function(){console.dir(c)},this.applyToView=function(a){var b,e=a.$el;e.find("[data-plugin]").each(function(){var a=this.dataset;p_name=a.plugin,b=new XO.plugin[p_name](this,a),b.name=p_name,a.pluginId?c[a.pluginId]=b:(c["p_"+d]=b,d++)})},this.destroyInView=function(){},this.bootup=function(a,b){for(var c in b)plugin=this.get(c),plugin&&plugin.bootup(b[c])},this.define=function(a,c){c=c||{};var d=function(){b.apply(this,arguments),this.super=b,this.name=a};d.prototype=function(){var a=function(){};a.prototype=b;var d=new a;for(var e in c)d[e]=c[e];return d}(),XO.plugin[a]=d}}),XO("Controller",function(a){this.define=function(b,c){XO.Controller[b]=a.extend(XO.Controller[b]||{},{id:b,viewId:function(a){return XO.View.getId(b,a)},renderView:function(a,b){this.renderExternalView(this.id,a,b)},renderExternalView:function(b,c,d){d=a.extend({onRender:function(){},data:{},dataPointer:null,hardRefresh:!1,param:null},d||{});var e=XO.Controller.getFullActionName(b,c),f=d.onRender,g=d.data,h=a.isFunction(g);XO.View.switchTo(b,c,d.param,function(a,b,c){return a?(f(e+a),void 0):h?(g.call(d.dataPointer,d.param,function(a,d){c(a,d),f(a,b)}),void 0):(c(null,g),f(null,b),void 0)},d.hardRefresh)}},c||{})},this.getFullActionName=function(a,b,c){return"Controller."+a+"."+b+(c||":")},this.defineDefaultAction=function(a,b,c){var d={};d[XO.CONST.DEFAULT.DEFAULT_ACTION_PREFIX+b]=c||XO.App.opts.defaultControllerAction||function(a){this.renderView(b,{param:a,data:function(a,b){var c={hi:1};b(null,c)}})},this.define(a,d)},this.invoke=function(a,b,c){var d=XO.Controller[a][b]||XO.Controller[a][XO.CONST.DEFAULT.DEFAULT_ACTION_PREFIX+b];d.call(XO.Controller[a],c)}}),XO("View",function(a,b){this.exposeEvent(["Init","InitFromRemote","Inited","InitedTemplate","InitedTemplateError"]),this.caches={},this.curViews={},this.defaultActions={initialize:function(){this.isRendered=null===this.dir||"undefined"==typeof this.dir,this.isRemote=!this.isRendered&&-1!==this.dir.indexOf(b.DEFAULT.TEMPLATE_SUFFIX),this.$host=a(this.cssHost),XO.Event.trigger(XO.EVENT.View.Init,[this]),this.isRendered&&this.initFromDom()},initFromDom:function(){this.el=document.getElementById(this.id),this.$el=a(this.el),this.animation=this.animation||this.el.getAttribute[b.ATTR.ANIMATION]||XO.App.opts.defaultAnimation,XO.Event.trigger(this,XO.EVENT.View.Inited,[this]),this.onRender&&this.onRender.call(this)},initFromRemote:function(b){XO.Event.trigger(XO.EVENT.View.InitFromRemote,[this]);var c=XO.View.getLSKey(this.id),d=XO.LS[c],e=this;return this.isRemote?(this.src=this.dir+this.pid+"/"+this.vid+".html",d&&(d=JSON.parse(d))&&d.src===this.src&&d.version===this.version&&!XO.App.opts.debug?(this.tpl=d.tpl,XO.Event.trigger(XO.EVENT.View.InitedTemplate,[this]),b&&b(null,this),void 0):(a.ajax({url:this.src,cache:!1,success:function(a){e.tpl=a,XO.LS[c]=JSON.stringify({tpl:a,src:e.src,version:e.version}),XO.Event.trigger(XO.EVENT.View.InitedTemplate,[e]),b&&b(null,e)},error:function(a,c,d){XO.Event.trigger(XO.EVENT.View.InitedTemplateError,[e]),b&&b(c+d.toString())}}),void 0)):(this.tpl=document.getElementById(this.dir),XO.Event.trigger(XO.EVENT.View.InitedTemplate,[this]),b&&b(null,this),void 0)},render:function(a){var b=XO.toHtml(this.tpl,a);this.$host.prepend(b),this.isRendered=!0,this.initFromDom()},animateIn:function(a,b,c){XO.View.uiLoader.hide(),XO.Animate.animateIn(this,a,b)&&!c&&XO.View.setCurView(this,this.pid)},animateOut:function(a,b){XO.Animate.animateOut(this,a,b)}},this.define=function(c,d){return c=c||{},c.pid&&c.vid?(this.curViews[c.pid]=this.curViews[c.pid]||{},c.cssHost=c.cssHost||b.SELECTOR.DEFAULT_CSS_HOST,c.id=this.getId(c.pid,c.vid),c=a.extend(c,this.defaultActions),c.isInited=!1,this.caches[c.id]=c,d?this._init(c):void 0):(XO.warn("Parameters require! pid and vid required!"),!1)},this._init=function(a){XO.App&&XO.App.opts&&(a.dir=null===a.dir?null:XO.App.opts.viewDir);var b=XO.baseView.extend(a);return b.id=a.id,b=new b,b.init&&(b.init.call(b),delete b.init),b.isInited=!0,this.caches[b.id]=b,b.alias&&!this[b.alias]&&(this[b.alias]=b),XO.Controller.defineDefaultAction(b.pid,b.vid),b},this.get=function(a,b,c,d){var e=this.getId(a,b),f=this.caches[e];return f?f.isRendered?(c(null,f),void 0):d?(d.call(f,function(){f.initFromRemote(c)}),void 0):(f.initFromRemote(c),void 0):(c(XO.warn("View with id ["+e+"] not found!")),void 0)},this.getId=function(a,c){return[b.DEFAULT.VIEW_ID_PREFIX,a,c].join("-")},this.setCurView=function(a,b){b&&(this.curViews[b].curView=a),this.curViews.curView=a},this.getCurView=function(a){return a?this.curViews[a].curView:this.curViews.curView},this.switch=function(a,b,c,d,e){return d=d||!1,XO.Animate.switch(a,b,c,d)?(XO.View.setCurView(b,e),!0):!1},this.switchTo=function(a,b,c,d,e){var f=this.getCurView(),g=function(a,b){return a?(XO.warn("XO.View.switchTo:"+a),d(a),void 0):b.isRendered&&!e?(b.animateIn(c),void 0):(d(null,b,function(a,c){return a?(XO.warn("XO.View.switchTo:"+a),void 0):(b.render(c),b.animateIn({animation:"none"}),void 0)}),void 0)},h=function(a){XO.View.uiLoader.animateIn(c,{onEnd:a},!0)};f&&f.animateOut(c),this.get(a,b,g,h)},this.init=function(){for(var a in this.caches)this.caches[a].isInited||this._init(this.caches[a])}}),XO.View.define({pid:"common",vid:"mask",alias:"uiMask",dir:null,isMasking:!1,show:function(){this.isMasking||(this.isMasking=!0,this.$el.removeClass(XO.CONST.CLASS.HIDE))},hide:function(){this.$el.addClass(XO.CONST.CLASS.HIDE),this.isMasking=!1}}),XO.View.define({pid:"common",vid:"loader",alias:"uiLoader",dir:null,isLoading:!1,show:function(){this.isLoading||(this.isLoading=!0,this.$el.removeClass(XO.CONST.CLASS.HIDE))},hide:function(){this.$el.addClass(XO.CONST.CLASS.HIDE).removeClass(XO.CONST.CLASS.ACTIVE),this.isLoading=!1}}),XO("Router",function(a,b){this.init=function(c){var d=c.routes||{"page/:page":"showPage","page/:page/:view":"showPage","page/:page/:view/:data":"showPage","page/:page/section/:section":"showSection","page/:page/section/:section/:param":"showSection","page/:page/aside/:aside":"showAside","page/:page/aside/:aside/:param":"showAside","page/:page/popup/:popup":"showPopup","page/:page/popup/:popup/:param":"showPopup","*actions":"defaultRoute"},e=XO.baseRouter.extend({routes:d,initialize:function(){this.on({route:this.onRoute,"route:defaultRoute":this.onDefaultRoute}),a(document).on("click","a:not([data-notrouter])",function(b){var c=a(this).attr("href"),d=this.protocol+"//";return XO.Router.instance.linkClicked=!0,c&&c.slice(0,d.length)!==d&&0!==c.indexOf("javascript")?(b.preventDefault(),XO.Router.instance.isGoback=this.getAttribute("data-back"),c=XO.Router.instance.isGoback||c,XO.history.navigate(c,!0),void 0):void 0}).on("click","button",function(){XO.Router.instance.linkClicked=!0,XO.Router.instance.isGoback=this.getAttribute("data-back"),XO.Router.instance.isGoback&&XO.history.navigate(XO.Router.instance.isGoback,!0)})},showPage:function(a,c,d){c=c||"index",d=JSON.parse(d||"{}");var e=this.linkClicked?null:b.DEFAULT.ANIMATION_NONE,f={pid:a,vid:c,animation:e,back:this.isGoback,dir:XO.App.opts.viewDir,type:b.ACTION.PAGE,cssHost:b.SELECTOR.PAGE_WRAPPER};f.params=d,XO.Controller.invoke(a,c,f),this.isGoback=!1,this.linkClicked=!1},showSection:function(a,b,c){console.log("showSection",{pid:a,secId:b,param:c})},showAside:function(a,b,c){console.log("showAside",{pid:a,asId:b,param:c})},showPopup:function(a,b,c){console.log("showPopup",{pid:a,popId:b,param:c})},isGoback:!1,onRoute:function(a,b){console.log("onRoute",a,b)},onDefaultRoute:function(a){console.log("Intercepted call of default router: "+a)}});this.instance=new e}}),XO("Animate",function(a,b){this.exposeEvent(["Start","End"]),this.animations={cubeleft:{name:"cubeleft",is3d:!0},cuberight:{name:"cuberight",is3d:!0},dissolve:{name:"dissolve"},fade:{name:"fade"},flipleft:{name:"flipleft",is3d:!0},flipright:{name:"flipright",is3d:!0},pop:{name:"pop",is3d:!0},swapleft:{name:"swapleft",is3d:!0},swapright:{name:"swapright",is3d:!0},slidedown:{name:"slidedown"},slideright:{name:"slideright"},slideup:{name:"slideup"},slideleft:{name:"slideleft"},xo_ani_slideleft:{name:"xo_ani_slideleft",is3d:!0},none:{name:"none"}},this.getReverseAnimation=function(a){var b={up:"down",down:"up",left:"right",right:"left","in":"out",out:"in"};return b[a]||a},this.add=function(a){this.animations[a.name]=a},this.get=function(a){return this.animations[a]||this.animations[XO.App.opts.defaultAnimation]},this.unselect=function(c){return c?(c.removeClass(b.CLASS.UIACTIVE),c.find("."+b.CLASS.UIACTIVE).removeClass(b.CLASS.UIACTIVE),void 0):(a("."+b.CLASS.UIACTIVE).removeClass(b.CLASS.UIACTIVE),void 0)},this.makeActive=function(a){a.addClass(b.CLASS.UIACTIVE)},this.animateIn=function(c,d,e){function f(){var a=XO.App.opts.tapBuffer;XO.support.animationEvents&&h&&XO.App.opts.useAnimations?(j.unbind("webkitAnimationEnd",f),k&&j.removeClass(k),XO.$body.removeClass(b.CLASS.ANIMATING+" "+b.CLASS.ANIMATION_3D)):(k&&j.removeClass(k),a+=260),setTimeout(function(){j.removeClass(b.CLASS.ANIMATION_IN),window.scroll(0,0)},a),XO.plugin.applyToView(c),XO.Event.trigger(c,XO.EVENT.Animate.End,m),c.onAnimated&&c.onAnimated.call(c,m),e.onEnd&&e.onEnd.call(c)}var g=d.animation,h=this.get(g),i=d.isBack||!1,j=c.$el;e=e||{},h=h.name!==b.DEFAULT.ANIMATION_NONE?h:null;var k,l,m={direction:b.CLASS.ANIMATION_IN,back:i,animation:h,isHiding:!1};return void 0===j||0===j.length?(this.unselect(),XO.warn("XO.Animate.animateIn:Target element is missing."),!1):j.hasClass(b.CLASS.ACTIVE)?(this.unselect(),XO.warn("XO.Animate.animateIn:You are already on the page you are trying to navigate to."),!1):(a(":focus").trigger("blur"),XO.Event.trigger(c,XO.EVENT.Animate.Start,m),c.onAnimating&&c.onAnimating.call(c,m),e.onStart&&e.onStart.call(c),XO.support.animationEvents&&h&&XO.App.opts.useAnimations?(!XO.support.transform3d&&h.is3d&&(XO.warn("XO.Animate.animateIn:Did not detect support for 3d animations, falling back to "+XO.App.opts.defaultAnimation+"."),h.name=XO.App.opts.defaultAnimation),k=h.name,l=h.is3d?" "+b.CLASS.ANIMATION_3D:"",i&&(k=k.replace(/left|right|up|down|in|out/,this.getReverseAnimation)),XO.warn("XO.Animate.animateIn: finalAnimationName is "+k+"."),j.on("webkitAnimationEnd",f),XO.$body.addClass(b.CLASS.ANIMATING+l),j.removeClass(b.CLASS.HIDE).addClass([k,b.CLASS.ANIMATION_IN,b.CLASS.ACTIVE].join(" "))):(j.removeClass(b.CLASS.HIDE).addClass([b.CLASS.ACTIVE,b.CLASS.ANIMATION_IN].join(" ")),f()),!0)},this.animateOut=function(a,c,d){function e(){var c=[j,b.CLASS.ANIMATION_OUT,b.CLASS.ANIMATION_INMOTION].join(" ");XO.support.animationEvents&&g&&XO.App.opts.useAnimations?(h.unbind("webkitAnimationEnd",e),h.removeClass(c),XO.$body.removeClass(b.CLASS.ANIMATING+" "+b.CLASS.ANIMATION_3D)):h.removeClass(c),XO.Animate.unselect(h),XO.plugin.destroyInView(a),XO.Event.trigger(a,XO.EVENT.Animate.End,l),a.onAnimated&&a.onAnimated.call(a,l),d.onEnd&&d.onEnd.call(a)}var f=c.animation,g=this.get(f),h=a.$el,i=c.isBack||!1;d=d||{},g=g.name!==b.DEFAULT.ANIMATION_NONE?g:null;var j,k,l={direction:b.CLASS.ANIMATION_OUT,back:i,animation:g,isHiding:!0};return void 0===h||0===h.length?(XO.warn("XO.Animate.animateOut:Target element is missing."),!1):(XO.Event.trigger(a,XO.EVENT.Animate.Start,l),a.onAnimating&&a.onAnimating.call(a,l),d.onStart&&d.onStart.call(a),XO.support.animationEvents&&g&&XO.App.opts.useAnimations?(!XO.support.transform3d&&g.is3d&&(XO.warn("XO.Animate.animateOut:Did not detect support for 3d animations, falling back to "+XO.App.opts.defaultAnimation+"."),g.name=XO.App.opts.defaultAnimation),j=g.name,k=g.is3d?" "+b.CLASS.ANIMATION_3D:"",i&&(j=j.replace(/left|right|up|down|in|out/,this.getReverseAnimation)),XO.warn("XO.Animate.animateOut: finalAnimationName is "+j+"."),h.bind("webkitAnimationEnd",e),XO.$body.addClass(b.CLASS.ANIMATING+k),h.removeClass(b.CLASS.ACTIVE).addClass([j,b.CLASS.ANIMATION_OUT,b.CLASS.ANIMATION_INMOTION].join(" "))):(h.removeClass(b.CLASS.ACTIVE),e()),!0)}}),XO("App",function(a,b){this.hideAddressBar=function(){window.scrollTo(0,0)},this.init=function(c){FastClick.attach(document.body),this.opts=a.extend({useFastTouch:!0,useAnimations:!0,defaultAnimation:"slideleft",trackScrollPositions:!0,useTouchScroll:!0,tapBuffer:100,debug:!1,defaultPage:b.DEFAULT.PAGE,defaultView:b.DEFAULT.VIEW,defaultControllerAction:null,viewDir:XO.$body[0].getAttribute("data-viewdir")||"assets/html/pages/"},c||{}),delete this.init;for(var d in XO)XO[d].init&&XO[d].init.call(XO[d],this.opts),delete XO[d].init;window.addEventListener(XO.EVENT.Sys.viewChange,this.hideAddressBar),this.hideAddressBar(),XO.history.start();var e=this.opts.defaultPage;window.location.hash.substring(1)||XO.Router.instance.navigate("page/"+e,{trigger:!0,replace:!0}),XO.support.touch&&window.addEventListener("touchstart",function(){XO.App.hideAddressBar()},!0)}});